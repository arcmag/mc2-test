# docker image - образ линукса
FROM node:13.12.0-alpine

# путь к директории внутри контейнера, где будут лежать данные
WORKDIR /usr/src/app

# скопировать файлы package-lock.json и package.json в рабочую директорию контейнера /usr/src/app
COPY package*.json ./

# команда для выполнения команды в shell
# установка npm пакетов внутри директории котейнера /usr/src/app
RUN npm i

# скопировать все файлы из рабочей директории внутрь директории контейнера /usr/src/app
COPY . .

# 1. Сначала копируются package файлы для установки пакетов
# 2. Создаётся файл .dockerignore в котором указывается node_modules
# 3. Копируются все оставшиеся файлы которые не были исключены в node_modules

# видимо нужен для того, что бы сообщить внешней среде о том, на каком порту работает приложение внутри контейнера?
# (тот порт который мы хотим раскрыть из docker контейнера для внешнего мира)
# EXPOSE 3000

# Судя по всему, это специальная команда для работы через shell среду?
# Возможно, эта команда запускается уже ПОСЛЕ сборки контейнера?
# CMD [ "node", "run start" ]

# docker system prune - очистка лишнего
# docker-compose up --build - команда для автоматической сборки и запуска докера
